{"version":3,"sources":["orbweaver-progress.min.js","/source/orbweaver-progress.min.js"],"names":["window","angular","undefined","orbweaver","module","factory","$q","orbRestfulResource","orbProgressService","defer","fn","params","deferred","start","response","done","resolve","reject","promise","deferInstance","inst","RestfulResource","empty","all","query","find","id","extend","get","save","res","delete","incrementProgressCounter","progressCounter","NProgress","decrementProgressCounter"],"mappings":"CAAA,SCAWA,EACTC,EAAAC,GDAA,YAEA,IAAIC,GAAYF,EAAQG,OAAO,eAAgB,eAE/CD,GAAUE,QAAQ,6BAA8B,KAAM,qBAAsB,SAAUC,EAAIC,EAAoBC,GAC5G,GAAIC,GAAQ,SAAUC,EAAIC,GACxBA,EAASA,KACT,IAAIC,GAAWN,EAAGG,OAWlB,OAVAD,GAAmBK,QACnBH,EAAGC,EACD,SAAUG,GACRN,EAAmBO,OACnBH,EAASI,QAAQF,IAEnB,SAAUA,GACRN,EAAmBO,OACnBH,EAASK,OAAOH,KAEbF,EAASM,SAGdC,EAAgB,SAAUC,EAAMV,EAAIC,GACtCA,EAASA,KACT,IAAIC,GAAWN,EAAGG,OAWlB,OAVAD,GAAmBK,QACnBO,EAAKV,GAAIC,EACP,SAAUG,GACRN,EAAmBO,OACnBH,EAASI,QAAQF,IAEnB,SAAUA,GACRN,EAAmBO,OACnBH,EAASK,OAAOH,KAEbF,EAASM,QAGlB,OAAO,UAAUG,GACf,OACEC,MAAO,WACL,MAAO,IAAID,IAEbE,IAAK,SAAUZ,GACb,MAAOF,GAAMY,EAAgBG,MAAOb,IAEtCc,KAAM,SAAUC,EAAIf,GAGlB,MAFAA,GAASA,MACTA,EAASV,EAAQ0B,OAAOhB,GAASe,GAAIA,IAC9BjB,EAAMY,EAAgBO,IAAKjB,IAEpCkB,KAAM,SAAUC,EAAKnB,GAEnB,MADAA,GAASA,MACLmB,EAAIJ,IACNf,EAASV,EAAQ0B,OAAOhB,GAASe,GAAII,EAAIJ,KAClCP,EAAcW,EAAK,UAAWnB,IAE9BQ,EAAcW,EAAK,UAAWnB,IAGzCoB,SAAU,SAAUD,EAAKnB,GAGvB,MAFAA,GAASA,MACTA,EAASV,EAAQ0B,OAAOhB,GAASe,GAAII,EAAIJ,KAClCjB,EAAMY,EAAgB,UAAWV,SAMhDR,EAAUE,QAAQ,qBAAsB,WAGtC,QAAS2B,KACiB,IAApBC,GACFC,UAAUrB,QAEZoB,IAGF,QAASE,KACPF,IACwB,IAApBA,GACFC,UAAUnB,OAZd,GAAIkB,GAAkB,CAgBtB,QACEpB,MAAO,WACLmB,KAEFjB,KAAM,WACJoB,SAILnC,OAAQA,OAAOC","file":"orbweaver-progress.min.js","sourcesContent":["!function(e,r,n){\"use strict\";var t=r.module(\"orbProgress\",[\"orbResource\"]);t.factory(\"orbRestfulProgressService\",[\"$q\",\"orbProgressService\",function(e,n,t){var o=function(r,n){n=n||{};var o=e.defer();return t.start(),r(n,function(e){t.done(),o.resolve(e)},function(e){t.done(),o.reject(e)}),o.promise},u=function(r,n,o){o=o||{};var u=e.defer();return t.start(),r[n](o,function(e){t.done(),u.resolve(e)},function(e){t.done(),u.reject(e)}),u.promise};return function(e){return{empty:function(){return new e},all:function(r){return o(e.query,r)},find:function(n,t){return t=t||{},t=r.extend(t,{id:n}),o(e.get,t)},save:function(e,n){return n=n||{},e.id?(n=r.extend(n,{id:e.id}),u(e,\"$update\",n)):u(e,\"$create\",n)},\"delete\":function(n,t){return t=t||{},t=r.extend(t,{id:n.id}),o(e[\"delete\"],t)}}}}]),t.factory(\"orbProgressService\",function(){function e(){0===n&&NProgress.start(),n++}function r(){n--,0===n&&NProgress.done()}var n=0;return{start:function(){e()},done:function(){r()}}})}(window,window.angular);\n//# sourceMappingURL=orbweaver-progress.min.js.map","(function (window, angular, undefined) {\n  'use strict';\n\n  var orbweaver = angular.module('orbProgress', ['orbResource']);\n\n  orbweaver.factory(\"orbRestfulProgressService\", ['$q', 'orbProgressService', function ($q, orbRestfulResource, orbProgressService) {\n    var defer = function (fn, params) {\n      params = params || {};\n      var deferred = $q.defer();\n      orbProgressService.start();\n      fn(params,\n        function (response) {\n          orbProgressService.done();\n          deferred.resolve(response);\n        },\n        function (response) {\n          orbProgressService.done();\n          deferred.reject(response);\n        });\n      return deferred.promise;\n    };\n\n    var deferInstance = function (inst, fn, params) {\n      params = params || {};\n      var deferred = $q.defer();\n      orbProgressService.start();\n      inst[fn](params,\n        function (response) {\n          orbProgressService.done();\n          deferred.resolve(response);\n        },\n        function (response) {\n          orbProgressService.done();\n          deferred.reject(response);\n        });\n      return deferred.promise;\n    };\n\n    return function (RestfulResource) {\n      return {\n        empty: function () {\n          return new RestfulResource();\n        },\n        all: function (params) {\n          return defer(RestfulResource.query, params);\n        },\n        find: function (id, params) {\n          params = params || {};\n          params = angular.extend(params, {id: id});\n          return defer(RestfulResource.get, params);\n        },\n        save: function (res, params) {\n          params = params || {};\n          if (res.id) {\n            params = angular.extend(params, {id: res.id});\n            return deferInstance(res, \"$update\", params);\n          } else {\n            return deferInstance(res, \"$create\", params);\n          }\n        },\n        'delete': function (res, params) {\n          params = params || {};\n          params = angular.extend(params, {id: res.id});\n          return defer(RestfulResource['delete'], params);\n        }\n      };\n    };\n  }]);\n\n  orbweaver.factory(\"orbProgressService\", function () {\n    var progressCounter = 0;\n\n    function incrementProgressCounter() {\n      if (progressCounter === 0) {\n        NProgress.start();\n      }\n      progressCounter++;\n    }\n\n    function decrementProgressCounter() {\n      progressCounter--;\n      if (progressCounter === 0) {\n        NProgress.done();\n      }\n    }\n\n    return {\n      start: function () {\n        incrementProgressCounter();\n      },\n      done: function () {\n        decrementProgressCounter();\n      }\n    };\n  });\n})(window, window.angular);\n\n"],"sourceRoot":"/source/"}